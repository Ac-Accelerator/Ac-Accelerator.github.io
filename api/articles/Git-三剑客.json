{"title":"Git 三剑客","uid":"47014b2a64ef7e5afe1be143d6d13723","slug":"Git-三剑客","date":"2024-11-02T14:34:00.000Z","updated":"2025-02-25T02:14:28.930Z","comments":true,"path":"api/articles/Git-三剑客.json","keywords":"C++,Pyhton,Java,算法","cover":"img/git.jpeg","content":"<h1 id=\"Git基础\"><a href=\"#Git基础\" class=\"headerlink\" title=\"Git基础\"></a>Git基础</h1><h2 id=\"配置Git\"><a href=\"#配置Git\" class=\"headerlink\" title=\"配置Git\"></a>配置Git</h2><p>Git希望每个变更都能找到对应的人，因此在使用之前，要求配置用户名和邮箱，否则会一直提示。</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">config</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--global</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">user.name</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"Your Name\"</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">config</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--global</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">user.email</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"Your Email\"</span></span></code></pre></div><p>其中，<code>--global</code>表示该config的作用域，有三种作用域：</p>\n<ul>\n<li><code>--system</code>：系统级别，对所有用户生效</li>\n<li><code>--global</code>：用户级别，对当前用户生效</li>\n<li><code>--local</code>：项目级别，对当前项目生效（最高优先级）</li>\n</ul>\n<p>如果要显示当前配置，可以使用<code>git config --list</code>命令，这会显示所有作用域的配置（优先级高的会覆盖掉优先级低的）。如果只查看<code>local</code>级别的配置，则：</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">config</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--local</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--list</span></span></code></pre></div><h2 id=\"创建Git仓库\"><a href=\"#创建Git仓库\" class=\"headerlink\" title=\"创建Git仓库\"></a>创建Git仓库</h2><h3 id=\"把已有项目代码纳入Git管理\"><a href=\"#把已有项目代码纳入Git管理\" class=\"headerlink\" title=\"把已有项目代码纳入Git管理\"></a>把已有项目代码纳入Git管理</h3><p>项目代码所在的文件夹是<code>existing_folder</code>，则：</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">cd</span><span style=\"color: #D4D4D4\"> [existing_folder]</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">init</span></span></code></pre></div><h3 id=\"新建项目并纳入Git管理\"><a href=\"#新建项目并纳入Git管理\" class=\"headerlink\" title=\"新建项目并纳入Git管理\"></a>新建项目并纳入Git管理</h3><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">init</span><span style=\"color: #D4D4D4\"> [project-name]</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">cd</span><span style=\"color: #D4D4D4\"> [project-name]</span></span></code></pre></div><p>此时，会创建一个名为<code>project-name</code>的文件夹，该文件夹即为项目文件夹。</p>\n<h2 id=\"Git中文件的状态\"><a href=\"#Git中文件的状态\" class=\"headerlink\" title=\"Git中文件的状态\"></a>Git中文件的状态</h2><p>进行了如下操作：</p>\n<ol>\n<li>新建文件<code>readme.md</code></li>\n<li>删除文件<code>qt/include/PlayListItem.h</code></li>\n<li>修改文件<code>qt/ui/mainwindow.ui</code></li>\n<li>执行<code>mv src/hello.cpp src/Hello.cpp</code></li>\n<li>修改文件<code>qt/src/mainwindow.cpp</code>，执行<code>git add qt/src/mainwindow.cpp</code></li>\n<li>新建文件<code>src/PlayListItem.cpp</code>，执行<code>git add src/PlayListItem.cpp</code></li>\n<li>执行<code>mv src/main.cpp src/Main.cpp</code>，执行<code>git add src/Hello.cpp src/Main.cpp</code></li>\n</ol>\n<p>通过<code>git status</code>命令可以查看文件的状态：</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">status</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">On</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">branch</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">main</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Changes</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">be</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">committed:</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  (</span><span style=\"color: #DCDCAA\">use</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"git restore --staged &lt;file&gt;...\"</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">unstage</span><span style=\"color: #D4D4D4\">)</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">modified:</span><span style=\"color: #D4D4D4\">   </span><span style=\"color: #CE9178\">qt/src/mainwindow.cpp</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">renamed:</span><span style=\"color: #D4D4D4\">    </span><span style=\"color: #CE9178\">src/main.cpp</span><span style=\"color: #D4D4D4\"> -&gt; </span><span style=\"color: #CE9178\">src/Main.cpp</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">new</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">file:</span><span style=\"color: #D4D4D4\">   </span><span style=\"color: #CE9178\">src/PlayListItem.cpp</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Changes</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">not</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">staged</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">for</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">commit:</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  (</span><span style=\"color: #DCDCAA\">use</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"git add/rm &lt;file&gt;...\"</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">update</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">what</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">will</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">be</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">committed</span><span style=\"color: #D4D4D4\">)</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  (</span><span style=\"color: #DCDCAA\">use</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"git restore &lt;file&gt;...\"</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">discard</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">changes</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">in</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">working</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">directory</span><span style=\"color: #D4D4D4\">)</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">deleted:</span><span style=\"color: #D4D4D4\">    </span><span style=\"color: #CE9178\">qt/include/PlayListItem.h</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">modified:</span><span style=\"color: #D4D4D4\">   </span><span style=\"color: #CE9178\">qt/ui/mainwindow.ui</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">deleted:</span><span style=\"color: #D4D4D4\">    </span><span style=\"color: #CE9178\">src/hello.cpp</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Untracked</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">files:</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  (</span><span style=\"color: #DCDCAA\">use</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"git add &lt;file&gt;...\"</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">include</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">in</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">what</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">will</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">be</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">committed</span><span style=\"color: #D4D4D4\">)</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">readme.md</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">src/Hello.cpp</span></span></code></pre></div><p>其中：</p>\n<ul>\n<li><code>Untracked files</code>：未被Git管理的文件，对其任何变更都不会被Git跟踪</li>\n<li><code>Changes not staged for commit</code>：已被Git管理的文件，但未被添加到暂存区</li>\n<li><code>Changes to be committed</code>：已被Git管理的文件，已被添加到暂存区</li>\n</ul>\n<p>对于新建的文件，自然是<code>Untracked files</code>，如<code>readme.md</code>；使用<code>git add</code>将其纳入git管理并添加到暂存区，则会变为<code>Changes to be committed</code>；如<code>src/PlayListItem.cpp</code>。</p>\n<p>对于已经被Git管理的文件，对其删除或修改，会变为<code>Changes not staged for commit</code>，如<code>qt/include/PlayListItem.h</code>和<code>qt/ui/mainwindow.ui</code>。</p>\n<p>对于已经被Git管理的文件，对其重命名，如将<code>src/hello.cpp</code>重命名为<code>src/Hello.cpp</code>，则<code>src/Hello.cpp</code>会成为<code>Untracked files</code>，而<code>src/hello.cpp</code>会被变为<code>Changes not staged for commit</code>的<code>deleted</code>记录。此时如果将<code>src/Hello.cpp</code>和<code>src/hello.cpp</code>都添加到暂存区。则会合并为一个<code>Changes to be committed</code>记录，如<code>src/main.cpp -&gt; src/Main.cpp</code>。</p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">如何高效的重命名文件</p>\n<p>git对于文件的重命名，可以通过<code>git mv</code>命令，如将<code>src/main.cpp</code>重命名为<code>src/Main.cpp</code>：</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">mv</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">src/main.cpp</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">src/Main.cpp</span></span></code></pre></div><p>这样的话，直接就在<code>Changes to be committed</code>中添加了<code>src/main.cpp -&gt; src/Main.cpp</code>的<code>renamed</code>记录。</p>\n\n</div>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">关于<code>git add</code>命令的常用方法</p>\n<p><p><code>git add .</code>：将<code>Untracked files</code>和<code>Changes not staged for commit</code>的文件添加到暂存区。</p>\n<p><code>git add -u</code>：将<code>Changes not staged for commit</code>的文件添加到暂存区。</p>\n</p>\n</div>\n<h2 id=\"Git查看版本历史\"><a href=\"#Git查看版本历史\" class=\"headerlink\" title=\"Git查看版本历史\"></a>Git查看版本历史</h2><p><code>git log</code>命令可以查看版本历史。</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">log</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看当前分支的版本历史</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">log</span><span style=\"color: #D4D4D4\"> [branch-name] </span><span style=\"color: #6A9955\"># 查看指定分支的版本历史</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">log</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--oneline</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 只显示commit id和commit message</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">log</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--graph</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 以图形化的方式显示版本历史</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">log</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">-n4</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看最近的4个版本历史</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">log</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--since=2021-01-01</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看从2021-01-01开始的版本历史</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">log</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--author=Ac-Accelerator</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看指定作者的版本历史</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">log</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--all</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看所有分支的版本历史</span></span></code></pre></div><p>这些操作都是正交的，可以组合使用。</p>\n<h2 id=\"git目录\"><a href=\"#git目录\" class=\"headerlink\" title=\".git目录\"></a>.git目录</h2><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D4D4D4\">branches/  COMMIT_EDITMSG  config  description  FETCH_HEAD  HEAD  hooks/  index  info/  logs/  objects/  refs/</span></span></code></pre></div><h3 id=\"HEAD、refs\"><a href=\"#HEAD、refs\" class=\"headerlink\" title=\"HEAD、refs/\"></a>HEAD、refs/</h3><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">.git/HEAD</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">ref:</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">refs/heads/main</span></span></code></pre></div><p>可以看到，<code>.git/HEAD</code>文件中记录的是一个引用。</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">.git/refs/heads/main</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">e846c2a89228ddd036542a2a412a102a47b809c0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat-file</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">-t</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">e846c2a8922</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看对象类型</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">commit</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat-file</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">-p</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">e846c2a8922</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看对象内容</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">tree</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">00804</span><span style=\"color: #CE9178\">f9b2b1c06f871cac671b799199e462c70aa</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">parent</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">14245854</span><span style=\"color: #CE9178\">f2b5376a4aaf04d23bcdb561d28554a7</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">author</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">Ac-Accelerator</span><span style=\"color: #D4D4D4\"> &lt;</span><span style=\"color: #CE9178\">example@mail.co</span><span style=\"color: #D4D4D4\">m&gt; </span><span style=\"color: #B5CEA8\">1730565280</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">+0800</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">committer</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">Ac-Accelerator</span><span style=\"color: #D4D4D4\"> &lt;</span><span style=\"color: #CE9178\">example@mail.co</span><span style=\"color: #D4D4D4\">m&gt; </span><span style=\"color: #B5CEA8\">1730565280</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">+0800</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">优化音乐播放器界面，添加音量渐变效果和窗口标题</span></span></code></pre></div><p>由此可见，分支保存在<code>.git/refs/heads/</code>目录下，每个分支对应一个文件，文件内容是一个commit id。而<code>.git/HEAD</code>文件中记录的是一个引用，指向<code>.git/refs/heads/</code>下的分支。</p>\n<p>此外，<code>.git/refs/</code>目录下还有一个<code>tags/</code>目录，用于保存tag，这个目录下的文件内容也是一个commit id。</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">ls</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">refs/tags/</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">v1.0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">refs/tags/v1.0</span><span style=\"color: #D4D4D4\"> </span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">e846c2a89228ddd036542a2a412a102a47b809c0</span></span></code></pre></div><h3 id=\"config\"><a href=\"#config\" class=\"headerlink\" title=\"config\"></a>config</h3><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">.git/config</span><span style=\"color: #D4D4D4\"> </span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">[core]</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">repositoryformatversion</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">=</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">0</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">filemode</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">=</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">true</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">bare</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">=</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">false</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">        </span><span style=\"color: #DCDCAA\">logallrefupdates</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">=</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">true</span></span></code></pre></div><p>保存了git的<code>local</code>级别的配置。</p>\n<h3 id=\"objects\"><a href=\"#objects\" class=\"headerlink\" title=\"objects/\"></a>objects/</h3><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">ls</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">objects/</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">00</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">0</span><span style=\"color: #CE9178\">b</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">14</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #CE9178\">f</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">22</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">24</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">33</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">41</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">46</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">58</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">65</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">71</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">7</span><span style=\"color: #CE9178\">c</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">87</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">96</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">a7</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">ad</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">b4</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">c3</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">c5</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">dd</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">e2</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">e8</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">fb</span><span style=\"color: #D4D4D4\">    </span><span style=\"color: #CE9178\">pack</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">01</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">10</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #CE9178\">c</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">20</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">23</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">31</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">40</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">43</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">56</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">5</span><span style=\"color: #CE9178\">f</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">6</span><span style=\"color: #CE9178\">d</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">76</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">82</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #B5CEA8\">91</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">a0</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">a8</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">b1</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">c2</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">c4</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">dc</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">e0</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">e6</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">ed</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">info</span></span></code></pre></div><p><code>objects/</code>目录下是一个树形结构。比如之前看到的commit对象<code>e846c2a89228ddd036542a2a412a102a47b809c0</code>就在<code>e8/46c2a89228ddd036542a2a412a102a47b809c0</code>这个文件中。</p>\n<p>git有三种主要对象：<code>blob</code>、<code>tree</code>、<code>commit</code>。<code>blob</code>是文件内容，<code>tree</code>是目录，<code>commit</code>是提交。</p>\n<p>比如：</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat-file</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">-p</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">e846c2a8922</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看commit内容</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">tree</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">00804</span><span style=\"color: #CE9178\">f9b2b1c06f871cac671b799199e462c70aa</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">parent</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">14245854</span><span style=\"color: #CE9178\">f2b5376a4aaf04d23bcdb561d28554a7</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">author</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">Ac-Accelerator</span><span style=\"color: #D4D4D4\"> &lt;</span><span style=\"color: #CE9178\">example@mail.co</span><span style=\"color: #D4D4D4\">m&gt; </span><span style=\"color: #B5CEA8\">1730565280</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">+0800</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">committer</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">Ac-Accelerator</span><span style=\"color: #D4D4D4\"> &lt;</span><span style=\"color: #CE9178\">example@mail.co</span><span style=\"color: #D4D4D4\">m&gt; </span><span style=\"color: #B5CEA8\">1730565280</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">+0800</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">优化音乐播放器界面，添加音量渐变效果和窗口标题</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat-file</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">-p</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">00804</span><span style=\"color: #CE9178\">f9</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看tree内容</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">100644</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">blob</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">e0f8c17ce7b1ff2f89c68c6912621ab87cc81a28</span><span style=\"color: #D4D4D4\">    </span><span style=\"color: #CE9178\">.gitignore</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">100644</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">blob</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">400387</span><span style=\"color: #CE9178\">ff2ac0e9d9d36891da6635e1a72e97b4f3</span><span style=\"color: #D4D4D4\">    </span><span style=\"color: #CE9178\">CMakeLists.txt</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">040000</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">tree</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #CE9178\">cf379bbb70bbac371e8786652d4c26dd190f0a1</span><span style=\"color: #D4D4D4\">    </span><span style=\"color: #CE9178\">qt</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">040000</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">tree</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">edcfc2dd0d2a14e8fc10a432ed71c82384a6db67</span><span style=\"color: #D4D4D4\">    </span><span style=\"color: #CE9178\">src</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat-file</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">-p</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">edcfc2dd</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看tree src 的内容</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">100644</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">blob</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">23</span><span style=\"color: #CE9178\">e02b1e787222b4ac9563c4c11f31151b54710a</span><span style=\"color: #D4D4D4\">    </span><span style=\"color: #CE9178\">main.cpp</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat-file</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">-p</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">23</span><span style=\"color: #CE9178\">e02b1e</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看blob main.cpp 的内容</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">int</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">main</span><span style=\"color: #D4D4D4\">(</span><span style=\"color: #DCDCAA\">int</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">argc,</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">char</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">*</span><span style=\"color: #CE9178\">argv[]</span><span style=\"color: #D4D4D4\">)</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    </span><span style=\"color: #DCDCAA\">QApplication</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">a</span><span style=\"color: #D4D4D4\">(</span><span style=\"color: #DCDCAA\">argc,</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">argv</span><span style=\"color: #D4D4D4\">);</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    </span><span style=\"color: #DCDCAA\">MainWindow</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">w</span><span style=\"color: #D4D4D4\">;</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    </span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    </span><span style=\"color: #DCDCAA\">w.show</span><span style=\"color: #D4D4D4\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    </span><span style=\"color: #C586C0\">return</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">a.exec</span><span style=\"color: #D4D4D4\">();</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">}</span></span></code></pre></div><div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">git的工作原理</p>\n<p>当我们添加或者修改了文件并且add到Stage Area之后，首先会根据文件内容创建不同的blob，当进行提交之后马上创建一个tree组件把需要的blob组件添加进去，之后再封装到一个commit组件中完成本次提交。在将来进行reset的时候可以直接使用git reset –hard xxxxx可以恢复到某个特定的版本，在reset之后，git会根据这个commit组件的id快速的找到tree组件，然后根据tree找到blob组件，之后对仓库进行还原，整个过程都是以hash和二进制进行操作，所以git执行效率非常之高。</p>\n\n</div>\n<h2 id=\"分离头指针\"><a href=\"#分离头指针\" class=\"headerlink\" title=\"分离头指针\"></a>分离头指针</h2><p>分离头指针是指HEAD指向的不是一个分支，而是一个commit id。</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">checkout</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">761</span><span style=\"color: #CE9178\">f72a</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Note:</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">switching</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">'761f72a'.</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">You</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">are</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">in</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">'detached HEAD'</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">state.</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">You</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">can</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">look</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">around,</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">make</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">experimental</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">changes</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">and</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">commit</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">them,</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">and</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">you</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">can</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">discard</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">any</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">commits</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">you</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">make</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">in</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">this</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">state</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">without</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">impacting</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">any</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">branches</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">by</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">switching</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">back</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">a</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">branch.</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">If</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">you</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">want</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">create</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">a</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">new</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">branch</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">retain</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">commits</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">you</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">create,</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">you</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">may</span></span>\n<span class=\"line\"><span style=\"color: #C586C0\">do</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #DCDCAA\">so</span><span style=\"color: #D4D4D4\"> (now </span><span style=\"color: #CE9178\">or</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">later</span><span style=\"color: #D4D4D4\">) by using -c with the switch command. Example:</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  </span><span style=\"color: #DCDCAA\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">switch</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">-c</span><span style=\"color: #D4D4D4\"> &lt;</span><span style=\"color: #CE9178\">new-branch-nam</span><span style=\"color: #D4D4D4\">e&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Or</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">undo</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">this</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">operation</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">with:</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  </span><span style=\"color: #DCDCAA\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">switch</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">-</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Turn</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">off</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">this</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">advice</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">by</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">setting</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">config</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">variable</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">advice.detachedHead</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">false</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">HEAD</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">is</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">now</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">at</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">761</span><span style=\"color: #CE9178\">f72a</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">add</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">playlist</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">function</span></span></code></pre></div><div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">提示</p>\n<p><p>此时<code>.git/HEAD</code>的内容会变成一个commit id。</p>\n</p>\n</div>\n<p>在分离头指针状态下，可以进行一些实验性的操作，比如修改文件、提交等。但这种情况下如果切换到其他分支，那么这些commit因为没有和任何分支关联，如果没有记住commit id，就无法找到了，而且<code>git gc</code>会删除这些commit。</p>\n<p>幸好，git会在checkout的时候，提示是否要创建一个新分支来保存这些commit:</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">checkout</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">main</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Warning:</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">you</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">are</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">leaving</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">2</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">commits</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">behind,</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">not</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">connected</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">any</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">of</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">your</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">branches:</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  </span><span style=\"color: #DCDCAA\">c7b9fd5</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">add</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">playlist</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">func</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  </span><span style=\"color: #DCDCAA\">3d8e0c3</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">add</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">themes</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">If</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">you</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">want</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">keep</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">them</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">by</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">creating</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">a</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">new</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">branch,</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">this</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">may</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">be</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">a</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">good</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">time</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">do</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">so</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">with:</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\"> </span><span style=\"color: #DCDCAA\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">branch</span><span style=\"color: #D4D4D4\"> &lt;</span><span style=\"color: #CE9178\">new-branch-nam</span><span style=\"color: #D4D4D4\">e&gt; </span><span style=\"color: #CE9178\">c7b9fd5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Switched</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">branch</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">'main'</span></span></code></pre></div><h1 id=\"独自使用Git的场景\"><a href=\"#独自使用Git的场景\" class=\"headerlink\" title=\"独自使用Git的场景\"></a>独自使用Git的场景</h1><h2 id=\"删除不需要的分支\"><a href=\"#删除不需要的分支\" class=\"headerlink\" title=\"删除不需要的分支\"></a>删除不需要的分支</h2><p><code>git branch -d [branch-name]</code>：删除分支，如果分支没有合并到缺省分支，会提示错误。</p>\n<p><code>git branch -D [branch-name]</code>：强制删除分支。</p>\n<h2 id=\"修改最后一次提交的message\"><a href=\"#修改最后一次提交的message\" class=\"headerlink\" title=\"修改最后一次提交的message\"></a>修改最后一次提交的message</h2><p><code>git commit --amend</code>：修改最后一次提交的message。</p>\n<h2 id=\"合并多个commit\"><a href=\"#合并多个commit\" class=\"headerlink\" title=\"合并多个commit\"></a>合并多个commit</h2><p><code>git rebase -i [commit-id]</code>：变基到<code>[commit-id]</code>，然后选择<code>pick</code>、<code>squash</code>、<code>fixup</code>等操作。</p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">rebase</p>\n<p>git rebase 的底层处理过程可以分为以下几个步骤：</p>\n<ol>\n<li>确定基底提交： Git 首先确定当前分支（例如 <code>feature-branch</code>）与目标分支（例如 <code>main</code>）的共同祖先提交。这是两个分支的分叉点。</li>\n<li>生成补丁： Git 会从当前分支上提取所有自共同祖先提交以来的提交，并将这些提交转换为一系列补丁文件。这些补丁文件记录了每个提交的差异。</li>\n<li>切换基底： Git 将当前分支的 <code>HEAD</code> 指针移动到目标分支的最新提交上（例如 <code>main</code> 分支的最新提交）。</li>\n<li>应用补丁： Git 依次应用之前生成的补丁文件，将每个补丁作为一个新的提交应用到新的基底上。这些新的提交会有新的提交哈希值，但内容与原始提交相同。</li>\n<li>处理冲突： 如果在应用补丁的过程中出现冲突，Git 会暂停 rebase 操作，并提示用户手动解决冲突。用户解决冲突后，可以使用 git rebase –continue 继续 rebase 操作。</li>\n<li>完成 rebase： 当所有补丁都成功应用后，rebase 操作完成。当前分支的提交历史将被重新整理，使其基于目标分支的最新提交。</li>\n</ol>\n\n</div>\n<p>所以，<code>git rebase -i [commit-id]</code>的操作就是将<code>[commit-id]</code>之后的 commit 重新整理。 </p>\n<p>包括修改过去的多个 commit message，合并多个连续的\\不连续的 commit，删除 commit 等。</p>\n<h2 id=\"让暂存区恢复到和指定commit一样\"><a href=\"#让暂存区恢复到和指定commit一样\" class=\"headerlink\" title=\"让暂存区恢复到和指定commit一样\"></a>让暂存区恢复到和指定commit一样</h2><p><code>git reset HEAD [file]</code>：将暂存区的<code>[file]</code>恢复到和<code>HEAD</code>一样。</p>\n<p><code>git reset HEAD</code>：将暂存区的所有文件恢复到和<code>HEAD</code>一样。</p>\n<p>三个参数：</p>\n<ul>\n<li><code>--soft</code>：不改变工作区和暂存区，只是将<code>HEAD</code>指向的 commit 恢复到指定的 commit。</li>\n<li><code>--mixed</code>：不改变工作区，只是将暂存区恢复到指定的 commit。（缺省）</li>\n<li><code>--hard</code>：工作区和暂存区都恢复到指定的 commit。</li>\n</ul>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">提示</p>\n<p><p><code>git reset --hard [commit-id]</code> 本质上是将当前分支的 <code>HEAD</code> 指针移动到 <code>[commit-id]</code>。因此可以用来撤销连续多个 commit。</p>\n</p>\n</div>\n<h2 id=\"让工作区恢复到和暂存区一样\"><a href=\"#让工作区恢复到和暂存区一样\" class=\"headerlink\" title=\"让工作区恢复到和暂存区一样\"></a>让工作区恢复到和暂存区一样</h2><p><code>git restore --staged [file]</code>：将暂存区的<code>[file]</code>恢复到和工作区一样。</p>\n<p><code>git restore --staged .</code>：将暂存区的所有文件恢复到和工作区一样。</p>\n<h2 id=\"删除文件\"><a href=\"#删除文件\" class=\"headerlink\" title=\"删除文件\"></a>删除文件</h2><p><code>git rm [file]</code>：删除文件，并将删除操作添加到暂存区。</p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">提示</p>\n<p><code>rm &lt;filename&gt;</code>先删除工作区的文件后，再使用命令<code>git add &lt;filename&gt;</code>提交到暂存区中，效果和使用<code>rm &lt;filename&gt;</code>再使用<code>git rm &lt;filename&gt;</code>一样。只是<code>git rm &lt;filename&gt;</code>可以省略本地工作区<code>rm &lt;filename&gt;</code>这个命令的操作步骤。</p>\n<p>总结：直接在工作区和暂存区中删除某个将来不需要提交到commit的文件时，使用命令<code>git rm &lt;filename&gt;</code>即可。</p>\n\n</div>\n<h2 id=\"处理紧急任务\"><a href=\"#处理紧急任务\" class=\"headerlink\" title=\"处理紧急任务\"></a>处理紧急任务</h2><p>使用stash，先保存手头上的工作，等到紧急任务处理完毕后，再恢复工作。</p>\n<p><code>git stash</code>：将工作区和暂存区的变更保存到栈中。</p>\n<p><code>git stash list</code>：查看栈中的stash。</p>\n<p><code>git stash apply</code>：将栈中的最新stash应用到工作区和暂存区。</p>\n<p><code>git stash pop</code>：将栈中的最新stash应用到工作区和暂存区，并删除栈中的最新stash。</p>\n<p><code>git stash drop</code>：删除栈中的最新stash。</p>\n<p><code>git stash clear</code>：清空栈。</p>\n<h2 id=\"忽略文件\"><a href=\"#忽略文件\" class=\"headerlink\" title=\"忽略文件\"></a>忽略文件</h2><p><code>.gitignore</code>文件用于忽略不需要被Git管理的文件。</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">cat</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">.gitignore</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">.cache/</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">.vscode/</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">*.o</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">build</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">CMakeLists.txt.user</span></span></code></pre></div><p>一行一个文件或目录，可以使用<code>*</code>、<code>?</code>、<code>[]</code>等通配符。<strong>注意，后面加了<code>/</code>表示忽略目录，不加表示忽略文件和目录。</strong></p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">提示</p>\n<p><p><code>.gitignore</code>只是对未被Git管理的文件生效，如果文件已经被Git管理，那么即使在<code>.gitignore</code>中添加了，也不会生效。</p>\n</p>\n</div>\n<h2 id=\"git仓库的备份\"><a href=\"#git仓库的备份\" class=\"headerlink\" title=\"git仓库的备份\"></a>git仓库的备份</h2><table>\n<thead>\n<tr>\n<th>常用协议</th>\n<th>语法格式</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>本地协议1</td>\n<td>/path/to/repo.git</td>\n<td>哑协议</td>\n</tr>\n<tr>\n<td>本地协议2</td>\n<td>file:///path/to/repo.git</td>\n<td>智能协议</td>\n</tr>\n<tr>\n<td>SSH协议</td>\n<td><a href=\"mailto:&#x75;&#x73;&#101;&#x72;&#64;&#104;&#111;&#115;&#x74;&#x2e;&#x78;&#122;\">user@host.xz</a>:path/to/repo.git</td>\n<td>工作中最常用的智能协议</td>\n</tr>\n<tr>\n<td>HTTP/HHTPS协议</td>\n<td><a href=\"https://host.xz/path/to/repo.git\">https://host.xz/path/to/repo.git</a></td>\n<td>智能协议</td>\n</tr>\n</tbody></table>\n<p>智能协议速度更快且进度可见。</p>\n<p>将仓库备份到本地：</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">clone</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--bare</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">file:///path/to/repo.git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">/path/to/repo.git.bak</span></span></code></pre></div><p>将仓库同步到远程：</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">remote</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">-v</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 查看远程仓库</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">remote</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">add</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">origin</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">https://host.xz/path/to/repo.git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 添加远程仓库</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">fetch</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">origin</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 从远程仓库拉取数据</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">push</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">-u</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">origin</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">main</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 将本地仓库同步到远程仓库</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">push</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">origin</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #569CD6\">--all</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #6A9955\"># 将本地仓库所有分支同步到远程仓库</span></span></code></pre></div><p>在fetch的时候，如果远程仓库有新的commit，会自动合并到本地仓库。但是如果有冲突，需要手动merge或者rebase。</p>\n<h1 id=\"Git多人单分支集成协作时的常见场景\"><a href=\"#Git多人单分支集成协作时的常见场景\" class=\"headerlink\" title=\"Git多人单分支集成协作时的常见场景\"></a>Git多人单分支集成协作时的常见场景</h1><h2 id=\"不同人修改了不同文件\"><a href=\"#不同人修改了不同文件\" class=\"headerlink\" title=\"不同人修改了不同文件\"></a>不同人修改了不同文件</h2><p><strong>产生过程：</strong></p>\n<ul>\n<li>开发者 A 和开发者 B 同时基于远程仓库的同一版本开始工作。</li>\n<li>开发者 A 修改了文件 file1.txt。</li>\n<li>开发者 B 修改了文件 file2.txt。</li>\n<li>开发者 A 和 B 都提交了本地修改。</li>\n<li>开发者 A 先推送 (push) 到远程仓库。</li>\n<li>开发者 B 随后推送。</li>\n</ul>\n<p>这种情况下，由于两人修改的是不同的文件，Git 会自动进行合并。当开发者 B 推送时，Git 会发现 file2.txt 的修改与远程仓库没有冲突，直接将修改应用到远程仓库。</p>\n<h2 id=\"不同人修改了同文件的不同区域\"><a href=\"#不同人修改了同文件的不同区域\" class=\"headerlink\" title=\"不同人修改了同文件的不同区域\"></a>不同人修改了同文件的不同区域</h2><p><strong>产生过程：</strong></p>\n<ul>\n<li>开发者 A 和开发者 B 同时基于远程仓库的同一版本开始工作。</li>\n<li>开发者 A 修改了文件 file.txt 的第 1-10 行。</li>\n<li>开发者 B 修改了文件 file.txt 的第 20-30 行。</li>\n<li>开发者 A 和 B 都提交了本地修改。</li>\n<li>开发者 A 先推送 (push) 到远程仓库。</li>\n<li>开发者 B 随后推送。</li>\n</ul>\n<p>由于修改的是同一个文件的不同区域，Git 也能自动进行合并。当开发者 B 推送时，Git 会发现 file.txt 的修改与远程仓库的修改没有重叠，自动将修改合并。</p>\n<h2 id=\"不同人修改了同文件的同一区域\"><a href=\"#不同人修改了同文件的同一区域\" class=\"headerlink\" title=\"不同人修改了同文件的同一区域\"></a>不同人修改了同文件的同一区域</h2><p>这种情况下，Git 无法自动合并，因为同一行代码被修改了两次，且修改内容不同。在该提交之后，其他开发者推送时，Git 会提示合并冲突。此时，需要手动解决冲突：</p>\n<p>假设远程分支以已经将readme.txt的最后一行修改，此时本地也修改了同一行并commit，如果在这之后……</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">pull</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Auto-merging</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">readme.txt</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">CONFLICT</span><span style=\"color: #D4D4D4\"> (content): Merge conflict </span><span style=\"color: #C586C0\">in</span><span style=\"color: #D4D4D4\"> readme.txt</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Automatic</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">merge</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">failed</span><span style=\"color: #D4D4D4\">; </span><span style=\"color: #DCDCAA\">fix</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">conflicts</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">and</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">then</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">commit</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">the</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">result.</span></span></code></pre></div><p>可以看到，Git提示了合并冲突，需要手动解决。</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki dark-plus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DCDCAA\">$</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">status</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">On</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">branch</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">master</span></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Your</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">branch</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">is</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">ahead</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">of</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">'origin/master'</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">by</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #B5CEA8\">2</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">commits.</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  (</span><span style=\"color: #DCDCAA\">use</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"git push\"</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">publish</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">your</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">local</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">commits</span><span style=\"color: #D4D4D4\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">You</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">have</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">unmerged</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">paths.</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  (</span><span style=\"color: #DCDCAA\">fix</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">conflicts</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">and</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">run</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"git commit\"</span><span style=\"color: #D4D4D4\">)</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  (</span><span style=\"color: #DCDCAA\">use</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"git merge --abort\"</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">abort</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">the</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">merge</span><span style=\"color: #D4D4D4\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">Unmerged</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">paths:</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">  (</span><span style=\"color: #DCDCAA\">use</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"git add &lt;file&gt;...\"</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">mark</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">resolution</span><span style=\"color: #D4D4D4\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">    </span><span style=\"color: #DCDCAA\">both</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">modified:</span><span style=\"color: #D4D4D4\">   </span><span style=\"color: #CE9178\">readme.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #DCDCAA\">no</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">changes</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">added</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">to</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">commit</span><span style=\"color: #D4D4D4\"> (use </span><span style=\"color: #CE9178\">\"git add\"</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">and/or</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">\"git commit -a\"</span><span style=\"color: #D4D4D4\">)</span></span></code></pre></div><p>git提示有冲突的文件是readme.txt，因此在修改readme.txt之后，重新提交一个commit来保存merge操作。这样就没事了。</p>\n<h2 id=\"同时变更了文件名和文件内容\"><a href=\"#同时变更了文件名和文件内容\" class=\"headerlink\" title=\"同时变更了文件名和文件内容\"></a>同时变更了文件名和文件内容</h2><p><strong>产生过程：</strong></p>\n<ul>\n<li>开发者 A 和开发者 B 同时基于远程仓库的同一版本开始工作。</li>\n<li>开发者 A 修改了文件 old_file.txt 的内容，并将文件名修改为 new_file_A.txt。</li>\n<li>开发者 B 修改了文件 old_file.txt 的内容，并将文件名修改为 new_file_B.txt。</li>\n<li>开发者 A 和 B 都提交了本地修改。</li>\n<li>开发者 A 先推送 (push) 到远程仓库。</li>\n<li>开发者 B 随后推送。</li>\n</ul>\n<p>这种情况下，Git 能够识别出文件被重命名，并且分别记录了两个文件的内容变更。当开发者 B 推送时，Git 会将两个重命名后的文件都保留下来，同时也会产生冲突，需要在 new_file_A.txt 和 new_file_B.txt 中分别解决内容冲突。解决方法与上一个类似。</p>\n<h2 id=\"把同一文件名改为了不同文件名\"><a href=\"#把同一文件名改为了不同文件名\" class=\"headerlink\" title=\"把同一文件名改为了不同文件名\"></a>把同一文件名改为了不同文件名</h2><p><strong>产生过程：</strong></p>\n<ul>\n<li>开发者 A 和开发者 B 同时基于远程仓库的同一版本开始工作。</li>\n<li>开发者 A 将文件 file.txt 重命名为 file_A.txt。</li>\n<li>开发者 B 将文件 file.txt 重命名为 file_B.txt。</li>\n<li>开发者 A 和 B 都提交了本地修改。</li>\n<li>开发者 A 先推送 (push) 到远程仓库。</li>\n<li>开发者 B 随后推送。</li>\n</ul>\n<p>Git 会认为这是两个独立的操作，会将两个重命名后的文件都保留下来。最终，仓库中会同时存在 file_A.txt 和 file_B.txt 两个文件。具体是否该删除取决于后续开发者之间的沟通。</p>\n<h1 id=\"Git工作流\"><a href=\"#Git工作流\" class=\"headerlink\" title=\"Git工作流\"></a>Git工作流</h1><h2 id=\"集中式工作流\"><a href=\"#集中式工作流\" class=\"headerlink\" title=\"集中式工作流\"></a>集中式工作流</h2><p>以中央仓库作为项目所有修改的单点实体。所有修改都提交到 Master 这个分支上，和SVN唯一的区别就是开发人员有本地仓库。</p>\n<h2 id=\"Gitflow-工作流\"><a href=\"#Gitflow-工作流\" class=\"headerlink\" title=\"Gitflow 工作流\"></a>Gitflow 工作流</h2><p>一种基于分支的工作流，它定义了一个严格的分支模型，每个分支都有特定的作用，如：功能开发、发布准备、维护等。</p>\n<p>具体的例子如下：</p>\n<ol>\n<li><strong>main (master)</strong>: 主分支，用于存放正式发布的产品代码。任何时候，<em>main</em> 分支的代码都应该是可部署的。</li>\n<li><strong>develop</strong>: 开发分支，作为日常开发的主要集成分支。所有新功能和 bug 修复都会先合并到 <em>develop</em> 分支。</li>\n<li><strong>feature</strong>: 功能分支，用于开发新的功能或特性。每个功能分支都基于 <em>develop</em> 分支创建，完成后再合并回 <em>develop</em> 分支。命名通常以 feature/ 开头，例如 feature/vaapi 等。</li>\n<li><strong>release</strong>: 发布分支，用于准备新的产品发布。当 <em>develop</em> 分支上的代码达到一个相对稳定的状态时，可以创建一个 <em>release</em> 分支。在 <em>release</em> 分支上进行测试、bug 修复和版本号更新等操作，最后合并到 <em>main</em> 分支和 <em>develop</em> 分支,生产环境运行一段阶段较稳定后可以视情况删除。命名通常以 release/ 开头，例如 release/v1.1.0。</li>\n<li><strong>hotfix</strong>: 热修复分支，用于紧急修复线上产品 bug。hotfix 分支基于 <em>main</em> 分支创建，修复完成后再合并回 <em>main</em> 分支和 <em>develop</em> 分支。并回后,视情况可以删除该分支。命名通常以 hotfix/ 开头，例如 hotfix/bug-crash。</li>\n</ol>\n<p><strong>一个具体的例子</strong>:</p>\n<p>假设正在开发一个电商网站，当前版本是 v1.0.0。</p>\n<ul>\n<li>新功能开发:<ol>\n<li>开发团队需要开发一个新的支付功能。</li>\n<li>从 develop 分支创建一个名为 feature/new-payment-method 的分支。</li>\n<li>开发者在 feature/new-payment-method 分支上进行开发和测试。</li>\n<li>开发完成后，将 feature/new-payment-method 分支合并回 develop 分支。</li>\n</ol>\n</li>\n<li>准备发布 v1.1.0:<ol>\n<li>当 develop 分支上的代码积累了一定量的新功能和 bug 修复后，决定发布 v1.1.0 版本。</li>\n<li>从 develop 分支创建一个名为 release/v1.1.0 的分支。</li>\n<li>测试团队在 release/v1.1.0 分支上进行测试，发现并修复了一些 bug.</li>\n<li>更新版本号为 v1.1.0。</li>\n<li>将 release/v1.1.0 分支合并回 main 分支和 develop 分支。</li>\n<li>在 main 分支上打上 v1.1.0 的 tag。</li>\n</ol>\n</li>\n<li>紧急 bug 修复:<ol>\n<li>v1.1.0 发布后，用户反馈支付模块存在一个严重的 bug。</li>\n<li>从 main 分支创建一个名为 hotfix/bug-in-payment-module 的分支</li>\n<li>开发者在 hotfix/bug-in-payment-module 分支上修复 bug。</li>\n<li>修复完成后，将 hotfix/bug-in-payment-module 分支合并回 main 分支和 develop 分支。</li>\n<li>在 main 分支上打上 v1.1.1 的 tag。</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"Forking-工作流\"><a href=\"#Forking-工作流\" class=\"headerlink\" title=\"Forking 工作流\"></a>Forking 工作流</h2><p>在 GitFlow 的基础上，利用fork以及 pull request 的功能达到代码审核的目的。适合大型项目以及开源项目的开发。</p>\n","feature":true,"text":"Git基础配置GitGit希望每个变更都能找到对应的人，因此在使用之前，要求配置用户名和邮箱，否则会一直提示。 bashgit config --global ...","permalink":"/post/Git-三剑客","photos":[],"count_time":{"symbolsCount":"13k","symbolsTime":"12 mins."},"categories":[{"name":"Git","slug":"Git","count":1,"path":"api/categories/Git.json"}],"tags":[{"name":"Git","slug":"Git","count":1,"path":"api/tags/Git.json"},{"name":"GitLab","slug":"GitLab","count":1,"path":"api/tags/GitLab.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Git%E5%9F%BA%E7%A1%80\"><span class=\"toc-text\">Git基础</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AEGit\"><span class=\"toc-text\">配置Git</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BAGit%E4%BB%93%E5%BA%93\"><span class=\"toc-text\">创建Git仓库</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8A%8A%E5%B7%B2%E6%9C%89%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81%E7%BA%B3%E5%85%A5Git%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">把已有项目代码纳入Git管理</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%B9%B6%E7%BA%B3%E5%85%A5Git%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">新建项目并纳入Git管理</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Git%E4%B8%AD%E6%96%87%E4%BB%B6%E7%9A%84%E7%8A%B6%E6%80%81\"><span class=\"toc-text\">Git中文件的状态</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Git%E6%9F%A5%E7%9C%8B%E7%89%88%E6%9C%AC%E5%8E%86%E5%8F%B2\"><span class=\"toc-text\">Git查看版本历史</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#git%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">.git目录</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#HEAD%E3%80%81refs\"><span class=\"toc-text\">HEAD、refs&#x2F;</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#config\"><span class=\"toc-text\">config</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#objects\"><span class=\"toc-text\">objects&#x2F;</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%86%E7%A6%BB%E5%A4%B4%E6%8C%87%E9%92%88\"><span class=\"toc-text\">分离头指针</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%8B%AC%E8%87%AA%E4%BD%BF%E7%94%A8Git%E7%9A%84%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">独自使用Git的场景</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E4%B8%8D%E9%9C%80%E8%A6%81%E7%9A%84%E5%88%86%E6%94%AF\"><span class=\"toc-text\">删除不需要的分支</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E6%9C%80%E5%90%8E%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4%E7%9A%84message\"><span class=\"toc-text\">修改最后一次提交的message</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%88%E5%B9%B6%E5%A4%9A%E4%B8%AAcommit\"><span class=\"toc-text\">合并多个commit</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AE%A9%E6%9A%82%E5%AD%98%E5%8C%BA%E6%81%A2%E5%A4%8D%E5%88%B0%E5%92%8C%E6%8C%87%E5%AE%9Acommit%E4%B8%80%E6%A0%B7\"><span class=\"toc-text\">让暂存区恢复到和指定commit一样</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AE%A9%E5%B7%A5%E4%BD%9C%E5%8C%BA%E6%81%A2%E5%A4%8D%E5%88%B0%E5%92%8C%E6%9A%82%E5%AD%98%E5%8C%BA%E4%B8%80%E6%A0%B7\"><span class=\"toc-text\">让工作区恢复到和暂存区一样</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">删除文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A4%84%E7%90%86%E7%B4%A7%E6%80%A5%E4%BB%BB%E5%8A%A1\"><span class=\"toc-text\">处理紧急任务</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">忽略文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#git%E4%BB%93%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD\"><span class=\"toc-text\">git仓库的备份</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Git%E5%A4%9A%E4%BA%BA%E5%8D%95%E5%88%86%E6%94%AF%E9%9B%86%E6%88%90%E5%8D%8F%E4%BD%9C%E6%97%B6%E7%9A%84%E5%B8%B8%E8%A7%81%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">Git多人单分支集成协作时的常见场景</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%8D%E5%90%8C%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E4%B8%8D%E5%90%8C%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">不同人修改了不同文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%8D%E5%90%8C%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E5%90%8C%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8D%E5%90%8C%E5%8C%BA%E5%9F%9F\"><span class=\"toc-text\">不同人修改了同文件的不同区域</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%8D%E5%90%8C%E4%BA%BA%E4%BF%AE%E6%94%B9%E4%BA%86%E5%90%8C%E6%96%87%E4%BB%B6%E7%9A%84%E5%90%8C%E4%B8%80%E5%8C%BA%E5%9F%9F\"><span class=\"toc-text\">不同人修改了同文件的同一区域</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%8C%E6%97%B6%E5%8F%98%E6%9B%B4%E4%BA%86%E6%96%87%E4%BB%B6%E5%90%8D%E5%92%8C%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9\"><span class=\"toc-text\">同时变更了文件名和文件内容</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8A%8A%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E5%90%8D%E6%94%B9%E4%B8%BA%E4%BA%86%E4%B8%8D%E5%90%8C%E6%96%87%E4%BB%B6%E5%90%8D\"><span class=\"toc-text\">把同一文件名改为了不同文件名</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Git%E5%B7%A5%E4%BD%9C%E6%B5%81\"><span class=\"toc-text\">Git工作流</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%9B%86%E4%B8%AD%E5%BC%8F%E5%B7%A5%E4%BD%9C%E6%B5%81\"><span class=\"toc-text\">集中式工作流</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Gitflow-%E5%B7%A5%E4%BD%9C%E6%B5%81\"><span class=\"toc-text\">Gitflow 工作流</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Forking-%E5%B7%A5%E4%BD%9C%E6%B5%81\"><span class=\"toc-text\">Forking 工作流</span></a></li></ol></li></ol>","author":{"name":"Ac-Accelerator","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"一位计算机技术爱好者，大学在读，目前正在学习C++、Python、Java和计算机系统以及计算机视觉深度学习等相关知识，欢迎交流","socials":{"github":"https://github.com/Ac-Accelerator","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_31702515?spm=1000.2115.3001.5343","juejin":"","customs":{"qq":{"icon":"/svg/QQ.svg","link":"http://tool.gljlw.com/qq/?qq=2583832841"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"函数钩子原理初探","uid":"d7e80eeb35c73d4ee8de7a24a876423f","slug":"函数钩子原理初探","date":"2025-02-25T02:01:00.000Z","updated":"2025-02-25T02:50:23.947Z","comments":true,"path":"api/articles/函数钩子原理初探.json","keywords":"C++,Pyhton,Java,算法","cover":"img/函数钩子.png","text":"什么是函数钩子在Windows操作系统中，似乎可以通过一些方法，将某个进程的函数调用替换掉，从而实现破解或者内容修改等功能。这种技术就是函数钩子。在Linux中...","permalink":"/post/函数钩子原理初探","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"C++","slug":"C","count":6,"path":"api/categories/C.json"}],"tags":[{"name":"函数钩子","slug":"函数钩子","count":1,"path":"api/tags/函数钩子.json"}],"author":{"name":"Ac-Accelerator","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"一位计算机技术爱好者，大学在读，目前正在学习C++、Python、Java和计算机系统以及计算机视觉深度学习等相关知识，欢迎交流","socials":{"github":"https://github.com/Ac-Accelerator","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_31702515?spm=1000.2115.3001.5343","juejin":"","customs":{"qq":{"icon":"/svg/QQ.svg","link":"http://tool.gljlw.com/qq/?qq=2583832841"}}}},"feature":true},"next_post":{"title":"C++Web框架：oatpp","uid":"6bcb75b14b50daaab50a7d442491f31a","slug":"C-Web框架oatpp","date":"2024-10-26T11:00:00.000Z","updated":"2024-10-27T19:55:54.040Z","comments":true,"path":"api/articles/C-Web框架oatpp.json","keywords":"C++,Pyhton,Java,算法","cover":"img/oatpp.png","text":"简介Oat++ 是一个开源的 C++ Web 框架，主打一个高性能、无依赖，提供了生产级开发所需的所有必要组件： 带有请求参数映射和 Swagger-UI 注释...","permalink":"/post/C-Web框架oatpp","photos":[],"count_time":{"symbolsCount":"22k","symbolsTime":"20 mins."},"categories":[{"name":"后端","slug":"后端","count":1,"path":"api/categories/后端.json"}],"tags":[{"name":"C++","slug":"C","count":13,"path":"api/tags/C.json"},{"name":"Web","slug":"Web","count":1,"path":"api/tags/Web.json"}],"author":{"name":"Ac-Accelerator","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"一位计算机技术爱好者，大学在读，目前正在学习C++、Python、Java和计算机系统以及计算机视觉深度学习等相关知识，欢迎交流","socials":{"github":"https://github.com/Ac-Accelerator","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_31702515?spm=1000.2115.3001.5343","juejin":"","customs":{"qq":{"icon":"/svg/QQ.svg","link":"http://tool.gljlw.com/qq/?qq=2583832841"}}}},"feature":true}}